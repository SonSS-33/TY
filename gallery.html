<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>B·ªô b√†i Y√™u Th√™m</title>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        padding: 20px;
        background: linear-gradient(
          135deg,
          #ff9a9e 0%,
          #fecfef 50%,
          #fecfef 100%
        );
        min-height: 100vh;
        margin: 0;
        text-align: center;
        position: relative;
        overflow-x: hidden;
      }

      /* Floating hearts animation */
      .floating-hearts {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
      }

      .heart {
        position: absolute;
        color: rgba(255, 51, 102, 0.3);
        font-size: 20px;
        animation: float 8s infinite ease-in-out;
      }

      @keyframes float {
        0% {
          transform: translateY(100vh) rotate(0deg);
          opacity: 0;
        }
        10% {
          opacity: 1;
        }
        90% {
          opacity: 1;
        }
        100% {
          transform: translateY(-20px) rotate(360deg);
          opacity: 0;
        }
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(10px);
        position: relative;
        z-index: 2;
      }

      h1 {
        color: #ff3366;
        font-size: 2.5em;
        margin-bottom: 20px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      }

      #question {
        font-size: 1.3em;
        font-style: italic;
        margin: 30px 0;
        padding: 20px;
        background: linear-gradient(45deg, #fff5f5, #ffe8ee);
        border-radius: 15px;
        border-left: 5px solid #ff3366;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        min-height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #333;
      }

      .controls {
        margin: 30px 0;
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        justify-content: center;
        align-items: center;
      }

      button {
        padding: 12px 25px;
        font-size: 1em;
        border: none;
        border-radius: 25px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: bold;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      #drawBtn {
        background: linear-gradient(45deg, #ff3366, #ff6b9d);
        color: white;
        font-size: 1.1em;
        padding: 15px 30px;
      }

      #drawBtn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(255, 51, 102, 0.4);
      }

      .input-box {
        margin: 20px 0;
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        justify-content: center;
        align-items: center;
      }

      input {
        flex: 1;
        min-width: 300px;
        padding: 12px 20px;
        font-size: 1em;
        border: 2px solid #ffb3c6;
        border-radius: 25px;
        outline: none;
        transition: all 0.3s ease;
      }

      input:focus {
        border-color: #ff3366;
        box-shadow: 0 0 10px rgba(255, 51, 102, 0.3);
      }

      #saveBtn {
        background: linear-gradient(45deg, #4caf50, #66bb6a);
        color: white;
      }

      #saveBtn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(76, 175, 80, 0.4);
      }

      .nav-buttons {
        display: flex;
        gap: 15px;
        justify-content: center;
        flex-wrap: wrap;
        margin: 20px 0;
      }

      .nav-btn {
        background: linear-gradient(45deg, #6c5ce7, #a29bfe);
        color: white;
        padding: 10px 20px;
        font-size: 0.9em;
      }

      .nav-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(108, 92, 231, 0.4);
      }

      #exportBtn,
      #importBtn {
        background: linear-gradient(45deg, #00b894, #00cec9);
        color: white;
      }

      #exportBtn:hover,
      #importBtn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(0, 184, 148, 0.4);
      }

      h2 {
        color: #ff3366;
        margin-top: 40px;
        font-size: 1.8em;
      }

      #answers {
        margin-top: 30px;
      }

      .answer-item {
        background: linear-gradient(45deg, #fff, #fafafa);
        padding: 20px;
        border-radius: 15px;
        margin: 15px 0;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        text-align: left;
        border-left: 5px solid #ff3366;
        transition: transform 0.3s ease;
        position: relative;
      }

      .answer-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
      }

      .question-text {
        font-weight: bold;
        color: #ff3366;
        margin-bottom: 10px;
        font-size: 1.1em;
      }

      .answer-text {
        color: #333;
        line-height: 1.6;
        font-size: 1em;
      }

      .delete-btn {
        position: absolute;
        top: 10px;
        right: 10px;
        background: #ff4757;
        color: white;
        border: none;
        border-radius: 50%;
        width: 30px;
        height: 30px;
        font-size: 14px;
        cursor: pointer;
        opacity: 0.7;
        transition: all 0.3s ease;
      }

      .delete-btn:hover {
        opacity: 1;
        transform: scale(1.1);
      }

      .stats {
        margin: 20px 0;
        padding: 15px;
        background: linear-gradient(45deg, #e17055, #fab1a0);
        color: white;
        border-radius: 15px;
        font-size: 1.1em;
        font-weight: bold;
      }

      .file-input {
        display: none;
      }

      .file-label {
        background: linear-gradient(45deg, #fd79a8, #fdcb6e);
        color: white;
        padding: 10px 20px;
        border-radius: 25px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: inline-block;
        font-weight: bold;
      }

      .file-label:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(253, 121, 168, 0.4);
      }

      @media (max-width: 768px) {
        .container {
          margin: 10px;
          padding: 20px;
        }

        h1 {
          font-size: 2em;
        }

        input {
          min-width: 250px;
        }

        .controls,
        .nav-buttons {
          flex-direction: column;
        }

        button {
          width: 100%;
          max-width: 300px;
        }
      }
    </style>
  </head>
  <body>
    <div class="floating-hearts" id="heartsContainer"></div>

    <div class="container">
      <h1>üíû Ch∆°i ƒë·ªÉ HI·ªÇU nhau h∆°n</h1>

      <div class="stats" id="stats">üìä B·∫°n ƒë√£ tr·∫£ l·ªùi 0 c√¢u h·ªèi</div>

      <div id="question">H√£y nh·∫•n "R√∫t c√¢u h·ªèi" ƒë·ªÉ b·∫Øt ƒë·∫ßu!</div>

      <div class="controls">
        <button id="drawBtn">üé≤ R√∫t c√¢u h·ªèi</button>
      </div>

      <div class="input-box">
        <input
          type="text"
          id="answerInput"
          placeholder="Nh·∫≠p c√¢u tr·∫£ l·ªùi c·ªßa b·∫°n..."
        />
        <button id="saveBtn">üíæ L∆∞u c√¢u tr·∫£ l·ªùi</button>
      </div>

      <div class="controls">
        <button id="exportBtn">üì§ Xu·∫•t file c√¢u tr·∫£ l·ªùi</button>
        <label for="importFile" class="file-label"
          >üì• Nh·∫≠p file c√¢u tr·∫£ l·ªùi</label
        >
        <input
          type="file"
          id="importFile"
          class="file-input"
          accept=".json,.txt"
        />
        <button
          id="clearBtn"
          style="
            background: linear-gradient(45deg, #ff4757, #ff6b7a);
            color: white;
          "
        >
          üóëÔ∏è X√≥a t·∫•t c·∫£
        </button>
      </div>

      <div class="nav-buttons">
        <button class="nav-btn" id="backCounter">üîô Quay v·ªÅ Counter</button>
        <button class="nav-btn" id="backHome">üè† Quay v·ªÅ Trang Ch·ªß</button>
      </div>

      <h2>üíó C√¢u tr·∫£ l·ªùi c·ªßa b·∫°n</h2>
      <div id="answers"></div>
    </div>

    <script>
      const questions = [
        "ƒêi·ªÅu tuy·ªát v·ªùi nh·∫•t m√† b·∫°n th√≠ch trong m·ªëi quan h·ªá c·ªßa ch√∫ng ta l√† g√¨?",
        "K·ªÉ v·ªÅ m·ªôt k·ª∑ ni·ªám vui nh·∫•t khi b√™n nhau.",
        "N·∫øu c√≥ m·ªôt ng√†y r·∫£nh tuy·ªát ƒë·ªëi, b·∫°n s·∫Ω c√πng ng∆∞·ªùi ·∫•y l√†m g√¨?",
        "ƒêi·ªÅu b·∫°n mong ƒë·ª£i nh·∫•t trong m·ªëi quan h·ªá c·ªßa ch√∫ng ta l√† g√¨?",
        "K·ªÉ v·ªÅ m·ªôt l·∫ßn ng∆∞·ªùi ƒë√≥ l√†m b·∫°n c·∫£m ƒë·ªông nh·∫•t.",
        "∆Ø·ªõc m∆° c·ªßa b·∫°n trong 5 nƒÉm t·ªõi c√πng ng∆∞·ªùi ƒë√≥ l√† g√¨?",
        "ƒêi·ªÉm ƒë√°ng y√™u nh·∫•t c·ªßa ng∆∞·ªùi ƒë√≥ trong m·∫Øt b·∫°n l√† g√¨?",
        "ƒêi·ªÅu g√¨ khi·∫øn b·∫°n c·∫£m th·∫•y an to√†n khi ·ªü b√™n ng∆∞·ªùi ƒë√≥?",
        "N·∫øu c√≥ th·ªÉ c√πng ng∆∞·ªùi ƒë√≥ du l·ªãch, b·∫°n s·∫Ω ch·ªçn n∆°i n√†o? T·∫°i sao?",
        "ƒêi·ªÅu b·∫•t ng·ªù nh·∫•t m√† ng∆∞·ªùi ƒë√≥ t·ª´ng mang l·∫°i cho b·∫°n l√† g√¨?",
        "K·ªÉ v·ªÅ l·∫ßn ƒë·∫ßu ti√™n b·∫°n nh·∫≠n ra t√¨nh c·∫£m c·ªßa m√¨nh.",
        "ƒêi·ªÅu b·∫°n mu·ªën th·ª≠ c√πng ng∆∞·ªùi ƒë√≥ trong t∆∞∆°ng lai l√† g√¨?",
        "B·∫£n nh·∫°c n√†o khi·∫øn b·∫°n nh·ªõ v·ªÅ ng∆∞·ªùi ƒë√≥ nhi·ªÅu nh·∫•t?",
        "ƒêi·ªÅu tuy·ªát v·ªùi nh·∫•t khi c√≥ ng∆∞·ªùi ƒë√≥ trong cu·ªôc s·ªëng c·ªßa b·∫°n l√† g√¨?",
        "K·ªÉ v·ªÅ kho·∫£nh kh·∫Øc hai ng∆∞·ªùi c√πng c∆∞·ªùi nhi·ªÅu nh·∫•t.",
        "ƒêi·ªÅu g√¨ khi·∫øn b·∫°n t·ª± h√†o v·ªÅ ng∆∞·ªùi ƒë√≥?",
        "K·ªÉ v·ªÅ m·ªôt chuy·∫øn ƒëi tuy·ªát v·ªùi c√πng ng∆∞·ªùi ƒë√≥.",
        "∆Ø·ªõc mong l·ªõn nh·∫•t c·ªßa b·∫°n trong m·ªëi quan h·ªá n√†y l√† g√¨?",
        "ƒêi·ªÅu g√¨ b·∫°n mu·ªën thay ƒë·ªïi c√πng ng∆∞·ªùi ƒë√≥ trong t∆∞∆°ng lai?",
        "ƒêi·ªÅu g√¨ b·∫°n th√≠ch nh·∫•t khi tr√≤ chuy·ªán c√πng ng∆∞·ªùi ƒë√≥?",
        "Kho·∫£nh kh·∫Øc n√†o khi·∫øn b·∫°n c·∫£m th·∫•y g·∫ßn g≈©i nh·∫•t v·ªõi ng∆∞·ªùi ƒë√≥?",
        "ƒêi·ªÅu g√¨ b·∫°n h·ªçc ƒë∆∞·ª£c t·ª´ m·ªëi quan h·ªá n√†y?",
        "N·∫øu c√≥ th·ªÉ quay l·∫°i qu√° kh·ª©, b·∫°n s·∫Ω n√≥i g√¨ v·ªõi ch√≠nh m√¨nh?",
        "ƒêi·ªÅu nh·ªè nh·∫•t m√† ng∆∞·ªùi ƒë√≥ l√†m nh∆∞ng khi·∫øn b·∫°n h·∫°nh ph√∫c nh·∫•t?",
        "B·∫°n mu·ªën t·∫°o ra k·ª∑ ni·ªám g√¨ c√πng ng∆∞·ªùi ƒë√≥ trong t∆∞∆°ng lai?",
      ];

      const questionEl = document.getElementById("question");
      const answerInput = document.getElementById("answerInput");
      const answersContainer = document.getElementById("answers");
      const drawBtn = document.getElementById("drawBtn");
      const saveBtn = document.getElementById("saveBtn");
      const exportBtn = document.getElementById("exportBtn");
      const importFile = document.getElementById("importFile");
      const clearBtn = document.getElementById("clearBtn");
      const statsEl = document.getElementById("stats");

      let currentQuestion = "";
      let answers = [];
      let usedQuestions = [];

      // T·∫°o floating hearts
      function createFloatingHearts() {
        const heartsContainer = document.getElementById("heartsContainer");
        setInterval(() => {
          const heart = document.createElement("div");
          heart.classList.add("heart");
          heart.innerHTML = Math.random() > 0.5 ? "üíï" : "üíñ";
          heart.style.left = Math.random() * 100 + "vw";
          heart.style.animationDuration = Math.random() * 3 + 5 + "s";
          heart.style.animationDelay = Math.random() * 2 + "s";
          heartsContainer.appendChild(heart);

          setTimeout(() => {
            heart.remove();
          }, 8000);
        }, 2000);
      }

      // C·∫≠p nh·∫≠t th·ªëng k√™
      function updateStats() {
        statsEl.textContent = `üìä B·∫°n ƒë√£ tr·∫£ l·ªùi ${answers.length} c√¢u h·ªèi`;
      }

      // Hi·ªÉn th·ªã c√¢u tr·∫£ l·ªùi
      function displayAnswers() {
        answersContainer.innerHTML = "";
        answers.forEach((item, index) => {
          const div = document.createElement("div");
          div.classList.add("answer-item");
          div.innerHTML = `
            <button class="delete-btn" onclick="deleteAnswer(${index})">√ó</button>
            <div class="question-text">‚ùì ${item.question}</div>
            <div class="answer-text">üí≠ ${item.answer}</div>
          `;
          answersContainer.appendChild(div);
        });
        updateStats();
      }

      // X√≥a c√¢u tr·∫£ l·ªùi
      window.deleteAnswer = function (index) {
        if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a c√¢u tr·∫£ l·ªùi n√†y?")) {
          answers.splice(index, 1);
          displayAnswers();
        }
      };

      // L∆∞u c√¢u tr·∫£ l·ªùi
      saveBtn.addEventListener("click", () => {
        if (!currentQuestion) {
          alert("H√£y r√∫t c√¢u h·ªèi tr∆∞·ªõc khi l∆∞u c√¢u tr·∫£ l·ªùi!");
          return;
        }
        const answer = answerInput.value.trim();
        if (!answer) {
          alert("H√£y nh·∫≠p c√¢u tr·∫£ l·ªùi c·ªßa b·∫°n!");
          return;
        }

        // Ki·ªÉm tra xem c√¢u h·ªèi ƒë√£ ƒë∆∞·ª£c tr·∫£ l·ªùi ch∆∞a
        const existingIndex = answers.findIndex(
          (item) => item.question === currentQuestion
        );
        if (existingIndex !== -1) {
          if (
            confirm(
              "C√¢u h·ªèi n√†y ƒë√£ ƒë∆∞·ª£c tr·∫£ l·ªùi. B·∫°n c√≥ mu·ªën c·∫≠p nh·∫≠t c√¢u tr·∫£ l·ªùi?"
            )
          ) {
            answers[existingIndex].answer = answer;
          }
        } else {
          answers.push({
            question: currentQuestion,
            answer: answer,
            timestamp: new Date().toLocaleString("vi-VN"),
          });
        }

        displayAnswers();
        answerInput.value = "";
      });

      // R√∫t c√¢u h·ªèi
      drawBtn.addEventListener("click", () => {
        let availableQuestions = questions.filter(
          (q) => !usedQuestions.includes(q)
        );

        if (availableQuestions.length === 0) {
          if (
            confirm(
              "B·∫°n ƒë√£ r√∫t h·∫øt t·∫•t c·∫£ c√¢u h·ªèi! B·∫°n c√≥ mu·ªën b·∫Øt ƒë·∫ßu l·∫°i t·ª´ ƒë·∫ßu?"
            )
          ) {
            usedQuestions = [];
            availableQuestions = questions;
          } else {
            return;
          }
        }

        const randomIndex = Math.floor(
          Math.random() * availableQuestions.length
        );
        currentQuestion = availableQuestions[randomIndex];
        usedQuestions.push(currentQuestion);

        questionEl.textContent = currentQuestion;
        answerInput.value = "";
        answerInput.focus();
      });

      // Xu·∫•t file
      exportBtn.addEventListener("click", () => {
        if (answers.length === 0) {
          alert("Ch∆∞a c√≥ c√¢u tr·∫£ l·ªùi n√†o ƒë·ªÉ xu·∫•t!");
          return;
        }

        const dataStr = JSON.stringify(
          {
            exportDate: new Date().toLocaleString("vi-VN"),
            totalAnswers: answers.length,
            answers: answers,
          },
          null,
          2
        );

        const dataBlob = new Blob([dataStr], { type: "application/json" });
        const url = URL.createObjectURL(dataBlob);
        const link = document.createElement("a");
        link.href = url;
        link.download = `love_answers_${new Date()
          .toISOString()
          .slice(0, 10)}.json`;
        link.click();
        URL.revokeObjectURL(url);
      });

      // Nh·∫≠p file
      importFile.addEventListener("change", (e) => {
        const file = e.target.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = (e) => {
          try {
            const data = JSON.parse(e.target.result);
            if (data.answers && Array.isArray(data.answers)) {
              if (
                confirm(
                  `T√¨m th·∫•y ${data.answers.length} c√¢u tr·∫£ l·ªùi. B·∫°n c√≥ mu·ªën th√™m v√†o danh s√°ch hi·ªán t·∫°i?`
                )
              ) {
                answers = [...answers, ...data.answers];
                displayAnswers();
                alert("ƒê√£ nh·∫≠p th√†nh c√¥ng!");
              }
            } else {
              alert("File kh√¥ng ƒë√∫ng ƒë·ªãnh d·∫°ng!");
            }
          } catch (error) {
            alert("Kh√¥ng th·ªÉ ƒë·ªçc file. Vui l√≤ng ki·ªÉm tra l·∫°i!");
          }
        };
        reader.readAsText(file);
        e.target.value = "";
      });

      // X√≥a t·∫•t c·∫£
      clearBtn.addEventListener("click", () => {
        if (
          confirm(
            "B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a t·∫•t c·∫£ c√¢u tr·∫£ l·ªùi? H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c!"
          )
        ) {
          if (confirm("Th·ª±c s·ª± ch·∫Øc ch·∫Øn? T·∫•t c·∫£ d·ªØ li·ªáu s·∫Ω b·ªã m·∫•t!")) {
            answers = [];
            usedQuestions = [];
            currentQuestion = "";
            questionEl.textContent = "H√£y nh·∫•n 'R√∫t c√¢u h·ªèi' ƒë·ªÉ b·∫Øt ƒë·∫ßu!";
            displayAnswers();
            alert("ƒê√£ x√≥a t·∫•t c·∫£!");
          }
        }
      });

      // Navigation buttons
      document.getElementById("backCounter").addEventListener("click", () => {
        window.location.href = "counter.html";
      });

      document.getElementById("backHome").addEventListener("click", () => {
        window.location.href = "index.html";
      });

      // Enter key support
      answerInput.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          saveBtn.click();
        }
      });

      // Kh·ªüi t·∫°o
      createFloatingHearts();
      displayAnswers();
    </script>
  </body>
</html>
