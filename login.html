<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ƒêƒÉng Nh·∫≠p</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
      }

      .login-container {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        padding: 40px;
        width: 100%;
        max-width: 400px;
        animation: slideIn 0.6s ease-out;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .login-header {
        text-align: center;
        margin-bottom: 30px;
      }

      .login-header h2 {
        color: #333;
        font-size: 28px;
        font-weight: 600;
        margin-bottom: 10px;
      }

      .login-header p {
        color: #666;
        font-size: 14px;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        color: #555;
        font-weight: 500;
        font-size: 14px;
      }

      .input-wrapper {
        position: relative;
      }

      .form-group input {
        width: 100%;
        padding: 12px 16px;
        border: 2px solid #e1e5e9;
        border-radius: 10px;
        font-size: 16px;
        transition: all 0.3s ease;
        background: #fff;
      }

      .form-group input:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }

      .form-group input:hover {
        border-color: #c1c9d4;
      }

      .login-btn {
        width: 100%;
        padding: 14px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 10px;
      }

      .login-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
      }

      .login-btn:active {
        transform: translateY(0);
      }

      .login-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }

      .loading {
        position: relative;
        overflow: hidden;
      }

      .loading::after {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        animation: loading 1.5s infinite;
      }

      @keyframes loading {
        0% {
          left: -100%;
        }
        100% {
          left: 100%;
        }
      }

      .error-message {
        color: #e74c3c;
        font-size: 14px;
        margin-top: 5px;
        display: none;
      }

      .success-message {
        color: #27ae60;
        font-size: 14px;
        margin-top: 5px;
        display: none;
      }

      .footer {
        text-align: center;
        margin-top: 30px;
        padding-top: 20px;
        border-top: 1px solid #e1e5e9;
      }

      .footer p {
        color: #666;
        font-size: 12px;
      }

      @media (max-width: 480px) {
        .login-container {
          padding: 30px 20px;
          margin: 10px;
        }

        .login-header h2 {
          font-size: 24px;
        }
      }

      /* Icons */
      .icon {
        position: absolute;
        right: 12px;
        top: 50%;
        transform: translateY(-50%);
        color: #999;
        font-size: 18px;
      }

      .input-wrapper {
        position: relative;
      }

      .form-group input {
        padding-right: 45px;
      }
    </style>
  </head>
  <body>
    <div class="login-container">
      <div class="login-header">
        <h2>ƒêƒÉng Nh·∫≠p</h2>
        <p>Ch√†o m·ª´ng b·∫°n quay tr·ªü l·∫°i!</p>
      </div>

      <form id="loginForm">
        <div class="form-group">
          <label for="loginEmail">Email</label>
          <div class="input-wrapper">
            <input
              type="email"
              id="loginEmail"
              placeholder="Nh·∫≠p email c·ªßa b·∫°n"
              required
            />
            <span class="icon">üìß</span>
          </div>
          <div class="error-message" id="emailError"></div>
        </div>

        <div class="form-group">
          <label for="loginPassword">M·∫≠t kh·∫©u</label>
          <div class="input-wrapper">
            <input
              type="password"
              id="loginPassword"
              placeholder="Nh·∫≠p m·∫≠t kh·∫©u"
              required
            />
            <span class="icon">üîí</span>
          </div>
          <div class="error-message" id="passwordError"></div>
        </div>

        <button type="submit" class="login-btn" id="loginBtn">ƒêƒÉng Nh·∫≠p</button>
      </form>

      <div class="footer">
        <p>¬© 2025 H·ªá th·ªëng qu·∫£n l√Ω. M·ªçi quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.</p>
      </div>
    </div>

    <script>
      const loginForm = document.getElementById("loginForm");
      const loginBtn = document.getElementById("loginBtn");
      const emailInput = document.getElementById("loginEmail");
      const passwordInput = document.getElementById("loginPassword");
      const emailError = document.getElementById("emailError");
      const passwordError = document.getElementById("passwordError");

      // Validate email format
      function validateEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
      }

      // Show error message
      function showError(element, message) {
        element.textContent = message;
        element.style.display = "block";
        element.previousElementSibling.querySelector(
          "input"
        ).style.borderColor = "#e74c3c";
      }

      // Hide error message
      function hideError(element) {
        element.style.display = "none";
        element.previousElementSibling.querySelector(
          "input"
        ).style.borderColor = "#e1e5e9";
      }

      // Clear all errors
      function clearErrors() {
        hideError(emailError);
        hideError(passwordError);
      }

      // Show loading state
      function showLoading() {
        loginBtn.disabled = true;
        loginBtn.classList.add("loading");
        loginBtn.textContent = "ƒêang ƒëƒÉng nh·∫≠p...";
      }

      // Hide loading state
      function hideLoading() {
        loginBtn.disabled = false;
        loginBtn.classList.remove("loading");
        loginBtn.textContent = "ƒêƒÉng Nh·∫≠p";
      }

      // Show custom alert
      function showAlert(message, type = "info") {
        const alertDiv = document.createElement("div");
        alertDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 10px;
                color: white;
                font-weight: 600;
                z-index: 1000;
                animation: slideInRight 0.3s ease-out;
                max-width: 300px;
            `;

        if (type === "success") {
          alertDiv.style.background =
            "linear-gradient(135deg, #27ae60, #2ecc71)";
        } else if (type === "error") {
          alertDiv.style.background =
            "linear-gradient(135deg, #e74c3c, #c0392b)";
        } else {
          alertDiv.style.background =
            "linear-gradient(135deg, #667eea, #764ba2)";
        }

        alertDiv.textContent = message;
        document.body.appendChild(alertDiv);

        // Add slide animation
        const style = document.createElement("style");
        style.textContent = `
                @keyframes slideInRight {
                    from {
                        opacity: 0;
                        transform: translateX(100%);
                    }
                    to {
                        opacity: 1;
                        transform: translateX(0);
                    }
                }
            `;
        document.head.appendChild(style);

        setTimeout(() => {
          alertDiv.remove();
          style.remove();
        }, 4000);
      }

      loginForm.addEventListener("submit", async function (e) {
        e.preventDefault();

        const email = emailInput.value.trim();
        const password = passwordInput.value;

        clearErrors();

        // Validation
        let hasError = false;

        if (!email) {
          showError(emailError, "Vui l√≤ng nh·∫≠p email");
          hasError = true;
        } else if (!validateEmail(email)) {
          showError(emailError, "Email kh√¥ng h·ª£p l·ªá");
          hasError = true;
        }

        if (!password) {
          showError(passwordError, "Vui l√≤ng nh·∫≠p m·∫≠t kh·∫©u");
          hasError = true;
        } else if (password.length < 1) {
          showError(passwordError, "M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 6 k√Ω t·ª±");
          hasError = true;
        }

        if (hasError) return;

        showLoading();

        const url =
          "https://script.google.com/macros/s/AKfycbzBvkQ75OAJVSw6mgrALcn5uUY0lCNf9uEDbA2GU3PgQRbmfTd0o6a5VmyCO0bKyLEA/exec";
        const params = `?action=login&email=${encodeURIComponent(
          email
        )}&password=${encodeURIComponent(password)}`;

        try {
          const response = await fetch(url + params);
          const result = await response.json();

          if (result.success && result.data) {
            showAlert(
              `‚úÖ ${result.message}\nXin ch√†o, ${result.data.name}`,
              "success"
            );
            setTimeout(() => {
              window.location.href = "index.html";
            }, 2000);
          } else {
            showAlert(`‚ùå ${result.message}`, "error");
          }
        } catch (error) {
          console.error("L·ªói khi g·ª≠i y√™u c·∫ßu:", error);
          showAlert("‚ö†Ô∏è Kh√¥ng th·ªÉ k·∫øt n·ªëi ƒë·∫øn server.", "error");
        } finally {
          hideLoading();
        }
      });

      // Real-time validation
      emailInput.addEventListener("input", function () {
        if (emailError.style.display === "block") {
          if (this.value.trim() && validateEmail(this.value.trim())) {
            hideError(emailError);
          }
        }
      });

      passwordInput.addEventListener("input", function () {
        if (passwordError.style.display === "block") {
          if (this.value.length >= 6) {
            hideError(passwordError);
          }
        }
      });
    </script>
  </body>
</html>
